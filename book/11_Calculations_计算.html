
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
                <!-- Global site tag (gtag.js) - Google Analytics -->
                <script async src="https://www.googletagmanager.com/gtag/js?id=UA-157005342-1"></script>
                <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());
        
                gtag('config', 'UA-157005342-1');
                </script>
        <script id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>11 Calculations 计算 · 基于 JupyterLab 的比特币极速入门指南</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="李大狗">
        
        
    
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-base16-ateliersulphurpool.light.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-ace/ace.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-emphasize/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-sectionx/sectionx.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-local-video/video-js.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-terminal/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="12_Conclusion_结论.html" />
    
    
    <link rel="prev" href="10_Privacy_隐私.html" />
    

    
    <link rel="stylesheet" href="gitbook/gitbook-plugin-chart/c3/c3.min.css">
    <script src="gitbook/gitbook-plugin-chart/c3/d3.min.js"></script>
    <script src="gitbook/gitbook-plugin-chart/c3/c3.min.js"></script>
    

    <script src="gitbook/gitbook-plugin-graph/d3.min.js"></script>
    <script src="gitbook/gitbook-plugin-graph/function-plot.js"></script>    

    <link href="https://bitcoin.doge.university/book/sitmap.xml" title="基于 JupyterLab 的比特币及速入门指南" rel="alternate" type="application/rss+xml" />

    
        <link rel="shortcut icon" href='favicon.png' type="image/x-icon">
    
    
        <link rel="bookmark" href='favicon.png' type="image/x-icon">
    
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://bitcoin.doge.university" target="_blank" class="custom-link">Home</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    0 序言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="1_Introduction_简介.html">
            
                <a href="1_Introduction_简介.html">
            
                    
                    1 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="2.1_Transaction_交易_电子货币的定义.html">
            
                <a href="2.1_Transaction_交易_电子货币的定义.html">
            
                    
                    2.1 Transaction 交易 —— 电子货币的定义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="2.2_Transaction_交易_交易链的难点.html">
            
                <a href="2.2_Transaction_交易_交易链的难点.html">
            
                    
                    2.2 Transaction 交易 —— 交易链的难点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="3_TimeStamp_Server_时间戳服务器.html">
            
                <a href="3_TimeStamp_Server_时间戳服务器.html">
            
                    
                    3 TimeStamp_Server 时间戳服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="4_Proof-of-Work_工作量证明.html">
            
                <a href="4_Proof-of-Work_工作量证明.html">
            
                    
                    4 Proof-of-Work 工作量证明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="5_Network_网络.html">
            
                <a href="5_Network_网络.html">
            
                    
                    5 Network 网络
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="6_Incentive_奖励.html">
            
                <a href="6_Incentive_奖励.html">
            
                    
                    6 Incentive 奖励
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="7_Reclaiming_Disk_Space_回收硬盘空间.html">
            
                <a href="7_Reclaiming_Disk_Space_回收硬盘空间.html">
            
                    
                    7 Reclaiming Disk Space 回收硬盘空间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="8_Simplified_Payment_Verification_简化版支付确认.html">
            
                <a href="8_Simplified_Payment_Verification_简化版支付确认.html">
            
                    
                    8 Simplified Payment Verification 简化版支付确认
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="9_Combining_and_Splitting_Value_值的组合与分割.html">
            
                <a href="9_Combining_and_Splitting_Value_值的组合与分割.html">
            
                    
                    9 Combining and Splitting Value 值的组合与分割
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="10_Privacy_隐私.html">
            
                <a href="10_Privacy_隐私.html">
            
                    
                    10 Privacy 隐私
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.13" data-path="11_Calculations_计算.html">
            
                <a href="11_Calculations_计算.html">
            
                    
                    11 Calculations 计算
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="12_Conclusion_结论.html">
            
                <a href="12_Conclusion_结论.html">
            
                    
                    12 Conclusion 结论
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="【附】白皮书_原文+翻译+单词注释.html">
            
                <a href="https://bitcoin.doge.university/book/whitepaper.html">
            
                    
                    【附】白皮书 原文+翻译+单词注释
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="【附2】比特币相关网站.html">
            
                <a href="【附2】比特币相关网站.html">
            
                    
                    【附2】比特币相关网站
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="【附3】习题集.html">
            
                <a href="https://wj.qq.com/s2/4518222/3cc5/">
            
                    
                    【附3】习题集
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >11 Calculations 计算</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><a href="#11-&#x8BA1;&#x7B97;&#xFF08;calculations&#xFF09;">11 &#x8BA1;&#x7B97;&#xFF08;Calculations&#xFF09;</a></li><ul><li><a href="#&#x539F;&#x6587;&#x4E0E;&#x7FFB;&#x8BD1;">&#x539F;&#x6587;&#x4E0E;&#x7FFB;&#x8BD1;</a></li><li><a href="#&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;">&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;</a></li><li><a href="#&#x8D4C;&#x535A;&#x7834;&#x4EA7;&#x95EE;&#x9898;-python-&#x6A21;&#x62DF;">&#x8D4C;&#x535A;&#x7834;&#x4EA7;&#x95EE;&#x9898; Python &#x6A21;&#x62DF;</a></li><li><a href="#&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x89E3;&#x6790;">&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x89E3;&#x6790;</a></li><li><a href="#&#x5EF6;&#x4F38;&#x9605;&#x8BFB;">&#x5EF6;&#x4F38;&#x9605;&#x8BFB;</a></li><li><a href="#&#x653B;&#x51FB;&#x8005;&#x8FFD;&#x5757;&#x6982;&#x7387;&#x8BA1;&#x7B97;-python-&#x7248;">&#x653B;&#x51FB;&#x8005;&#x8FFD;&#x5757;&#x6982;&#x7387;&#x8BA1;&#x7B97; Python &#x7248;</a></li></ul></ul></div><a href="#11-&#x8BA1;&#x7B97;&#xFF08;calculations&#xFF09;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="11-&#x8BA1;&#x7B97;&#xFF08;calculations&#xFF09;"><a name="11-&#x8BA1;&#x7B97;&#xFF08;calculations&#xFF09;" class="anchor-navigation-ex-anchor" href="#11-&#x8BA1;&#x7B97;&#xFF08;calculations&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>11 &#x8BA1;&#x7B97;&#xFF08;Calculations&#xFF09;</h1>
<h2 id="&#x539F;&#x6587;&#x4E0E;&#x7FFB;&#x8BD1;"><a name="&#x539F;&#x6587;&#x4E0E;&#x7FFB;&#x8BD1;" class="anchor-navigation-ex-anchor" href="#&#x539F;&#x6587;&#x4E0E;&#x7FFB;&#x8BD1;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x539F;&#x6587;&#x4E0E;&#x7FFB;&#x8BD1;</h2>
<p>We consider the scenario of an attacker trying to generate an alternate chain faster than the honest chain. Even if this is accomplished, it does not throw the system open to arbitrary changes, such as creating value out of thin air or taking money that never belonged to the attacker. Nodes are not going to accept an invalid transaction as payment, and honest nodes will never accept a block containing them. An attacker can only try to change one of his own transactions to take back money he recently spent.</p>
<p>假设一个场景，某个攻击者正在试图生成一个比诚实链更快的替代链。就算他成功了，也不会使当前系统被任意控制，即，他不可能凭空制造出价值，也无法获取从未属于他的钱。网络节点不会把一笔无效交易当作支付，而诚实节点也永远不会接受一个包含这种支付的区块。攻击者最多只能修改属于他自己的交易，进而试图取回他已经花出去的钱<strong>（双重支付）</strong>。</p>
<p>The race between the honest chain and an attacker chain can be characterized as a Binomial Random Walk. The success event is the honest chain being extended by one block, increasing its lead by +1, and the failure event is the attacker&apos;s chain being extended by one block, reducing the gap by -1.</p>
<p>&#x8BDA;&#x5B9E;&#x94FE;&#x548C;&#x653B;&#x51FB;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x7ADE;&#x4E89;&#x53EF;&#x4EE5;&#x7528;&#x4E8C;&#x9879;&#x968F;&#x673A;&#x6F2B;&#x6B65;&#x6765;&#x63CF;&#x8FF0;&#x3002;&#x6210;&#x529F;&#x4E8B;&#x4EF6;&#x662F;&#x8BDA;&#x5B9E;&#x94FE;&#x521A;&#x521A;&#x88AB;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x533A;&#x5757;&#xFF0C;&#x4F7F;&#x5F97;&#x5B83;&#x7684;&#x4F18;&#x52BF;&#x589E;&#x52A0;&#x4E86; 1&#xFF1B;&#x800C;&#x5931;&#x8D25;&#x4E8B;&#x4EF6;&#x662F;&#x653B;&#x51FB;&#x8005;&#x7684;&#x94FE;&#x521A;&#x521A;&#x88AB;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x533A;&#x5757;&#xFF0C;&#x4F7F;&#x5F97;&#x8BDA;&#x5B9E;&#x94FE;&#x7684;&#x4F18;&#x52BF;&#x51CF;&#x5C11;&#x4E86; 1&#x3002;</p>
<p>The probability of an attacker catching up from a given deficit is analogous to a Gambler&apos;s Ruin problem. Suppose a gambler with unlimited credit starts at a deficit and plays potentially an infinite number of trials to try to reach breakeven. We can calculate the probability he ever reaches breakeven, or that an attacker ever catches up with the honest chain, as follows<sup><a href="#fn_8" id="reffn_8">8</a></sup>:</p>
<p>&#x653B;&#x51FB;&#x8005;&#x80FD;&#x591F;&#x4ECE;&#x843D;&#x540E;&#x5C40;&#x9762;&#x8FFD;&#x5E73;&#x7684;&#x6982;&#x7387;&#x7C7B;&#x4F3C;&#x4E8E;&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;&#x3002;&#x5047;&#x8BBE;&#xFF0C;&#x4E00;&#x4E2A;&#x62FF;&#x7740;&#x65E0;&#x9650;&#x7B79;&#x7801;&#x7684;&#x8D4C;&#x5F92;&#xFF0C;&#x4ECE;&#x4E8F;&#x7A7A;&#x5F00;&#x59CB;&#xFF0C;&#x5141;&#x8BB8;&#x4ED6;&#x8D4C;&#x65E0;&#x9650;&#x6B21;&#xFF0C;&#x76EE;&#x6807;&#x662F;&#x586B;&#x8865;&#x4E0A;&#x5DF2;&#x6709;&#x7684;&#x4E8F;&#x7A7A;&#x3002;&#x6211;&#x4EEC;&#x80FD;&#x7B97;&#x51FA;&#x4ED6;&#x6700;&#x7EC8;&#x80FD;&#x586B;&#x8865;&#x4E8F;&#x7A7A;&#x7684;&#x6982;&#x7387;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x653B;&#x51FB;&#x8005;&#x80FD;&#x591F;&#x8D76;&#x4E0A;&#x8BDA;&#x5B9E;&#x94FE;&#x7684;&#x6982;&#x7387;<sup><a href="#fn_8" id="reffn_8">8</a></sup>&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>$$\begin{eqnarray} \large p &=& \text{ 诚实节点找到下一个区块的概率}\ \\ \large q &=& \text{ 攻击者找到下一个区块的概率}\ \\ \large q_z &=& \text{ 攻击者落后 $z$ 个区块却依然能够赶上的概率} \end{eqnarray}  $$</p>
<p>$$ \large q_z = \begin{Bmatrix} 1 &amp; \textit{if } p \leq q\ \\ (q/p)^z &amp; \textit{if } p &gt; q \end{Bmatrix} $$</p>
<p>Given our assumption that p > q, the probability drops exponentially as the number of blocks the attacker has to catch up with increases. With the odds against him, if he doesn&apos;t make a lucky lunge forward early on, his chances become vanishingly small as he falls further behind.</p>
<p>&#x65E2;&#x7136;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5047;&#x5B9A; p > q, &#x65E2;&#x7136;&#x653B;&#x51FB;&#x8005;&#x9700;&#x8981;&#x8D76;&#x8D85;&#x7684;&#x533A;&#x5757;&#x6570;&#x91CF;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x90A3;&#x4E48;&#x5176;&#x6210;&#x529F;&#x6982;&#x7387;&#x5C31;&#x4F1A;&#x6307;&#x6570;&#x7EA7;&#x4E0B;&#x964D;&#x3002;&#x4E8E;&#x8D62;&#x9762;&#x4E0D;&#x5229;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x653B;&#x51FB;&#x8005;&#x6CA1;&#x6709;&#x5728;&#x8D77;&#x521D;&#x5C31;&#x80FD;&#x5E78;&#x8FD0;&#x5730;&#x505A;&#x4E00;&#x4E2A;&#x524D;&#x79FB;&#x6B65;&#x523A;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x7684;&#x80DC;&#x7387;&#x5C06;&#x5728;&#x4ED6;&#x8FDB;&#x4E00;&#x6B65;&#x843D;&#x540E;&#x7684;&#x540C;&#x65F6;&#x6D88;&#x5F2D;&#x6B86;&#x5C3D;&#x3002;</p>
<p>We now consider how long the recipient of a new transaction needs to wait before being sufficiently certain the sender can&apos;t change the transaction. We assume the sender is an attacker who wants to make the recipient believe he paid him for a while, then switch it to pay back to himself after some time has passed. The receiver will be alerted when that happens, but the sender hopes it will be too late.</p>
<p>&#x73B0;&#x5728;&#x8003;&#x8651;&#x4E00;&#x4E0B;&#x4E00;&#x7B14;&#x65B0;&#x4EA4;&#x6613;&#x7684;&#x6536;&#x6B3E;&#x4EBA;&#x9700;&#x8981;&#x7B49;&#x591A;&#x4E45;&#x624D;&#x80FD;&#x5145;&#x5206;&#x786E;&#x5B9A;&#x53D1;&#x6B3E;&#x4EBA;&#x4E0D;&#x80FD;&#x66F4;&#x6539;&#x8FD9;&#x7B14;&#x4EA4;&#x6613;&#x3002;&#x6211;&#x4EEC;&#x5047;&#x5B9A;&#x53D1;&#x6B3E;&#x4EBA;&#x662F;&#x4E2A;&#x653B;&#x51FB;&#x8005;&#xFF0C;&#x5984;&#x56FE;&#x8BA9;&#x6536;&#x6B3E;&#x4EBA;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x91CC;&#x76F8;&#x4FE1;&#x4ED6;&#x5DF2;&#x7ECF;&#x652F;&#x4ED8;&#x5BF9;&#x4ED8;&#x6B3E;&#x9879;&#xFF0C;&#x968F;&#x540E;&#x5C06;&#x8FD9;&#x7B14;&#x94B1;&#x518D;&#x8F6C;&#x56DE;&#x7ED9;&#x81EA;&#x5DF1;&#x3002;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x6536;&#x6B3E;&#x4EBA;&#x5F53;&#x7136;&#x4F1A;&#x6536;&#x5230;&#x8B66;&#x544A;&#xFF0C;&#x4F46;&#x53D1;&#x6B3E;&#x4EBA;&#x5E0C;&#x671B;&#x90A3;&#x65F6;&#x6728;&#x5DF2;&#x6210;&#x821F;&#x3002;</p>
<p>The receiver generates a new key pair and gives the public key to the sender shortly before signing. This prevents the sender from preparing a chain of blocks ahead of time by working on it continuously until he is lucky enough to get far enough ahead, then executing the transaction at that moment. Once the transaction is sent, the dishonest sender starts working in secret on a parallel chain containing an alternate version of his transaction.</p>
<p>&#x6536;&#x6B3E;&#x4EBA;&#x751F;&#x6210;&#x4E86;&#x4E00;&#x5BF9;&#x65B0;&#x7684;&#x516C;&#x79C1;&#x94A5;&#xFF0C;&#x800C;&#x540E;&#x5728;&#x7B7E;&#x7F72;&#x4E4B;&#x524D;&#x4E0D;&#x4E45;&#x5C06;&#x516C;&#x94A5;&#x544A;&#x77E5;&#x53D1;&#x6B3E;&#x4EBA;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x4E00;&#x79CD;&#x60C5;&#x5F62;&#xFF1A;&#x53D1;&#x6B3E;&#x4EBA;&#x63D0;&#x524D;&#x901A;&#x8FC7;&#x8FDE;&#x7EED;&#x8FD0;&#x7B97;&#x53BB;&#x51C6;&#x5907;&#x4E00;&#x6761;&#x94FE;&#x4E0A;&#x7684;&#x533A;&#x5757;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x8981;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x8FD0;&#x6C14;&#x5C31;&#x4F1A;&#x8DB3;&#x591F;&#x9886;&#x5148;&#xFF0C;&#x76F4;&#x5230;&#x90A3;&#x65F6;&#x518D;&#x6267;&#x884C;&#x4EA4;&#x6613;&#x3002;&#x4E00;&#x65E6;&#x6B3E;&#x9879;&#x5DF2;&#x88AB;&#x53D1;&#x51FA;&#xFF0C;&#x90A3;&#x4E2A;&#x4E0D;&#x8BDA;&#x5B9E;&#x7684;&#x53D1;&#x6B3E;&#x4EBA;&#x5F00;&#x59CB;&#x79D8;&#x5BC6;&#x5730;&#x5728;&#x53E6;&#x4E00;&#x6761;&#x5E73;&#x884C;&#x94FE;&#x4E0A;&#x5F00;&#x5DE5;&#xFF0C;&#x8BD5;&#x56FE;&#x5728;&#x5176;&#x4E2D;&#x52A0;&#x5165;&#x4E00;&#x4E2A;&#x53CD;&#x5411;&#x7248;&#x672C;&#x7684;&#x4EA4;&#x6613;&#x3002;</p>
<p>The recipient waits until the transaction has been added to a block and z blocks have been linked after it. He doesn&apos;t know the exact amount of progress the attacker has made, but assuming the honest blocks took the average expected time per block, the attacker&apos;s potential progress will be a Poisson distribution with expected value:</p>
<p>&#x6536;&#x6B3E;&#x4EBA;&#x7B49;&#x5230;&#x6B64;&#x7B14;&#x4EA4;&#x6613;&#x88AB;&#x6253;&#x5305;&#x8FDB;&#x533A;&#x5757;&#xFF0C;&#x5E76;&#x5DF2;&#x7ECF;&#x6709; z &#x4E2A;&#x533A;&#x5757;&#x968F;&#x540E;&#x88AB;&#x52A0;&#x5165;&#x3002;&#x4ED6;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x653B;&#x51FB;&#x8005;&#x7684;&#x5DE5;&#x4F5C;&#x8FDB;&#x5C55;&#x7A76;&#x7ADF;&#x5982;&#x4F55;&#xFF0C;&#x4F46;&#x662F;&#x5047;&#x5B9A;&#x8BDA;&#x5B9E;&#x533A;&#x5757;&#x6309;&#x7167;&#x671F;&#x671B;&#x7684;&#x5E73;&#x5747;&#x901F;&#x5EA6;&#x751F;&#x6210;&#xFF0C;&#x5219;&#x653B;&#x51FB;&#x8005;&#x7684;&#x6F5C;&#x5728;&#x8FDB;&#x5C55;&#x7B26;&#x5408;&#x6CCA;&#x677E;&#x5206;&#x5E03;&#xFF0C;&#x5176;&#x671F;&#x671B;&#x503C;&#x4E3A;&#xFF1A;</p>
<p>$$ \large \lambda = z \frac qp $$</p>
<p>To get the probability the attacker could still catch up now, we multiply the Poisson density for each amount of progress he could have made by the probability he could catch up from that point:</p>
<p>&#x4E3A;&#x4E86;&#x7B97;&#x51FA;&#x653B;&#x51FB;&#x8005;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x8D76;&#x4E0A;&#x7684;&#x6982;&#x7387;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x628A;&#x6BCF;&#x4E00;&#x4E2A;&#x653B;&#x51FB;&#x8005;&#x5DF2;&#x6709;&#x7684;&#x8FDB;&#x5C55;&#x7684;&#x6CCA;&#x677E;&#x5BC6;&#x5EA6;&#xFF0C;&#x4E58;&#x4EE5;&#x4ED6;&#x53EF;&#x4EE5;&#x4ECE;&#x90A3;&#x4E00;&#x70B9;&#x80FD;&#x591F;&#x8FFD;&#x4E0A;&#x6765;&#x7684;&#x6982;&#x7387;&#xFF1A;</p>
<p>$$ \large \sum_{k=0}^{\infty} \frac{\lambda^k e^{-\lambda}}{k!} \cdot \begin{Bmatrix} (q/p)^{(z-k)} &amp; \textit{if } k\leq z\ \\ 1 &amp; \textit{if } k &gt; z \end{Bmatrix} $$</p>
<p><img src="pics/attack_probability.jpg" alt="attack_probability"></p>
<p>Rearranging to avoid summing the infinite tail of the distribution...</p>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5BF9;&#x5BC6;&#x5EA6;&#x5206;&#x5E03;&#x7684;&#x65E0;&#x7A77;&#x7EA7;&#x6570;&#x6C42;&#x548C;&#x91CD;&#x65B0;&#x6574;&#x7406;&#x2026;</p>
<p>$$ \large 1 - \sum_{k=0}^{z} \frac{\lambda^k e^{-\lambda}}{k!} \left ( 1-(q/p)^{(z-k)} \right ) $$</p>
<p>Converting to C code...</p>
<p>&#x8F6C;&#x6362;&#x4E3A; C &#x8BED;&#x8A00;&#x7A0B;&#x5E8F;&#x2026;&#x2026;</p>
<pre class="language-"><code>#include <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>math.h</span><span class="token punctuation">&gt;</span></span>
double AttackerSuccessProbability(double q, int z)
{
    double p = 1.0 - q;
    double lambda = z * (q / p);
    double sum = 1.0;
    int i, k;
    for (k = 0; k &lt;= z; k++)
    {
        double poisson = exp(-lambda);
        for (i = 1; i &lt;= k; i++)
            poisson *= lambda / i;
        sum -= poisson * (1 - pow(q / p, z - k));
    }
    return sum;
}
</code></pre><p>Running some results, we can see the probability drop off exponentially with z.</p>
<p>&#x83B7;&#x53D6;&#x90E8;&#x5206;&#x7ED3;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6982;&#x7387;&#x968F;&#x7740; z &#x7684;&#x589E;&#x52A0;&#x6307;&#x6570;&#x7EA7;&#x4E0B;&#x964D;&#xFF1A;</p>
<pre class="language-"><code>   q=0.1
   z=0    P=1.0000000
   z=1    P=0.2045873
   z=2    P=0.0509779
   z=3    P=0.0131722
   z=4    P=0.0034552
   z=5    P=0.0009137
   z=6    P=0.0002428
   z=7    P=0.0000647
   z=8    P=0.0000173
   z=9    P=0.0000046
   z=10   P=0.0000012

   q=0.3
   z=0    P=1.0000000
   z=5    P=0.1773523
   z=10   P=0.0416605
   z=15   P=0.0101008
   z=20   P=0.0024804
   z=25   P=0.0006132
   z=30   P=0.0001522
   z=35   P=0.0000379
   z=40   P=0.0000095
   z=45   P=0.0000024
   z=50   P=0.0000006
</code></pre><p>Solving for P less than 0.1%...</p>
<p>&#x82E5;&#x662F; P &#x5C0F;&#x4E8E; 0.1%&#x2026;&#x2026;</p>
<pre class="language-"><code>   P &lt; 0.001
   q=0.10   z=5
   q=0.15   z=8
   q=0.20   z=11
   q=0.25   z=15
   q=0.30   z=24
   q=0.35   z=41
   q=0.40   z=89
   q=0.45   z=340
</code></pre><p><strong>[8]</strong> An Introduction to Probability Theory and its Applications<em>* William Feller </em>John Wiley &amp; Sons* (1957) <a href="https://archive.org/details/AnIntroductionToProbabilityTheoryAndItsApplicationsVolume1" target="_blank">https://archive.org/details/AnIntroductionToProbabilityTheoryAndItsApplicationsVolume1</a></p>
<h2 id="&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;"><a name="&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;" class="anchor-navigation-ex-anchor" href="#&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8D4C;&#x5F92;&#x7834;&#x4EA7;&#x95EE;&#x9898;</h2>
<p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x9898;&#x5916;&#x8BDD;&#xFF0C;&#x4F46;&#x56E0;&#x4E3A;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x6709;&#x610F;&#x4E49;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x662F;&#x63D2;&#x5165;&#x5230;&#x4E86;&#x8FD9;&#x91CC;&#x2026;&#x2026;</p>
<blockquote>
<p>&#x5047;&#x8BBE;&#x6709;&#x4E24;&#x4E2A;&#x4EBA;&#x73A9;&#x516C;&#x5E73;&#x7684;&#x629B;&#x786C;&#x5E01;&#x8D4C;&#x8F93;&#x8D62;&#x7684;&#x6E38;&#x620F;&#xFF0C;&#x89C4;&#x5219;&#x662F;&#xFF1A;</p>
<p>&#x8D4C;&#x6CE8;&#x5927;&#x5C0F;&#x6052;&#x5B9A;</p>
<p>&#x76F4;&#x81F3;&#x4E00;&#x65B9;&#x8F93;&#x5149;&#x6E38;&#x620F;&#x624D;&#x80FD;&#x7ED3;&#x675F;</p>
<p>&#x8BF7;&#x95EE;&#xFF0C;&#x6700;&#x7EC8;&#x51B3;&#x5B9A;&#x8F93;&#x8D62;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#xFF08;&#x5355;&#x9009;&#xFF09;&#xFF1F;</p>
<p><strong>A.&#x624B;&#x6C14; B.&#x8C01;&#x5148;&#x629B;&#x786C;&#x5E01; C.&#x629B;&#x786C;&#x5E01;&#x6B21;&#x6570; D.&#x603B;&#x6E38;&#x620F;&#x65F6;&#x957F; E.&#x4EE5;&#x4E0A;&#x7686;&#x662F; F.&#x4EE5;&#x4E0A;&#x7686;&#x4E0D;&#x662F;</strong></p>
</blockquote>
<p>&#x7B54;&#x6848;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5BF9;&#x6B64;&#x505A;&#x4E86;&#x5F88;&#x6E05;&#x6670;&#x7684;&#x9610;&#x8FF0;&#x2014;&#x2014;</p>
<p><a href="http://xiaolai.co/books/1ef3bd91da19da1423a7c04fe1882ec9/B13.html" target="_blank">&#x7406;&#x8D22;&#xFF1A;&#x522B;&#x505A;&#x9669;&#x76F2;</a></p>
<h2 id="&#x8D4C;&#x535A;&#x7834;&#x4EA7;&#x95EE;&#x9898;-python-&#x6A21;&#x62DF;"><a name="&#x8D4C;&#x535A;&#x7834;&#x4EA7;&#x95EE;&#x9898;-python-&#x6A21;&#x62DF;" class="anchor-navigation-ex-anchor" href="#&#x8D4C;&#x535A;&#x7834;&#x4EA7;&#x95EE;&#x9898;-python-&#x6A21;&#x62DF;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x8D4C;&#x535A;&#x7834;&#x4EA7;&#x95EE;&#x9898; Python &#x6A21;&#x62DF;</h2>
<p>&#x8C03;&#x6574;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x4E00;&#x4E9B;&#x6709;&#x610F;&#x601D;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x4F8B;&#x5982;&#x2014;&#x2014;</p>
<ul>
<li><p>&#x628A; round_num &#x6539;&#x6210; 1000 &#x8BD5;&#x8BD5;</p>
</li>
<li><p>&#x5E84;&#x5BB6;&#x6765;&#x4E00;&#x70B9;&#x300C;&#x62BD;&#x6C34;&#x300D;</p>
</li>
</ul>
<p>&#x3010;Python &#x77E5;&#x8BC6;&#x70B9;&#x3011; &#x70B9;&#x51FB;&#x94FE;&#x63A5;&#x8DF3;&#x8F6C;&#x81F3;&#x300A;&#x81EA;&#x5B66;&#x662F;&#x95E8;&#x624B;&#x827A;&#x300B;&#x76F8;&#x5E94;&#x77E5;&#x8BC6;&#x70B9;</p>
<ul>
<li><a href="https://github.com/selfteaching/the-craft-of-selfteaching/blob/master/Part.2.D.1-args.ipynb" target="_blank">&#x51FD;&#x6570;</a></li>
<li><a href="https://github.com/selfteaching/the-craft-of-selfteaching/blob/master/Part.1.E.3.controlflow.ipynb" target="_blank">&#x6D41;&#x7A0B;&#x63A7;&#x5236; &#x2014;&#x2014; for &#x5FAA;&#x73AF;</a></li>
</ul>
<pre class="language-"><code class="lang-python"><span class="token keyword">import</span> random
<span class="token triple-quoted-string string">&apos;&apos;&apos;
&#x629B;&#x786C;&#x5E01;&#x6E38;&#x620F;&#xFF1A;
&#x629B;&#x786C;&#x5E01;&#xFF0C;&#x6B63;&#x53CD;&#x4E24;&#x9762;&#x6982;&#x7387;&#x5404;50%&#xFF0C;&#x6B63;&#x9762;&#x4F60;&#x8D62;&#xFF0C;&#x53CD;&#x9762;&#x5E84;&#x5BB6;&#x8D62;&#x3002;
10&#x4F4D;&#x73A9;&#x5BB6;&#xFF0C;&#x8D4C;&#x672C;10&#x5143;&#xFF0C;&#x8FDB;&#x884C;100&#x8F6E;&#x3002;
&apos;&apos;&apos;</span>


round_num <span class="token operator">=</span> <span class="token number">10</span>
person_num <span class="token operator">=</span> <span class="token number">10</span>
player_total_win_money <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">for</span> person <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>person_num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    gambling_money <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token keyword">for</span> r <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>round_num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        coin <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># 0&#x4E3A;&#x6B63;&#xFF0C;1&#x4E3A;&#x53CD;</span>
        <span class="token keyword">if</span> coin <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">:</span>
            gambling_money <span class="token operator">=</span> gambling_money <span class="token operator">+</span> <span class="token number">1</span> 
        <span class="token keyword">elif</span> coin <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">:</span>
            gambling_money <span class="token operator">=</span> gambling_money <span class="token operator">-</span> <span class="token number">1</span>

        <span class="token keyword">if</span> gambling_money <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">:</span>
            <span class="token comment"># &#x56E0;&#x7834;&#x4EA7;&#x800C;&#x9000;&#x51FA;&#x8D4C;&#x535A;</span>
            <span class="token keyword">break</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">pass</span>
    player_total_win_money <span class="token operator">+=</span> gambling_money <span class="token operator">-</span> <span class="token number">10</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7B2C; {} &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; {} &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; {} &#x5143;&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span>r<span class="token punctuation">,</span>gambling_money<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;=========&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> player_total_win_money <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;&#x73A9;&#x5BB6;&#x8D62;&#xFF01;&#x8D62;&#x4E86;&#xFF1A;{} &#x5143;&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>player_total_win_money<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">elif</span> player_total_win_money <span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5E84;&#x5BB6;&#x8D62;&#xFF01;&#x8D62;&#x4E86;&#xFF1A;{} &#x5143;&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token operator">-</span>player_total_win_money<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5E84;&#x5BB6;&#x548C;&#x73A9;&#x5BB6;&#x5E73;&#x624B;&#xFF01;&quot;</span><span class="token punctuation">)</span>
</code></pre>
<pre class="language-"><code>&#x7B2C; 1 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 4 &#x5143;
&#x7B2C; 2 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 6 &#x5143;
&#x7B2C; 3 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 6 &#x5143;
&#x7B2C; 4 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 0 &#x5143;
&#x7B2C; 5 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 12 &#x5143;
&#x7B2C; 6 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 6 &#x5143;
&#x7B2C; 7 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 12 &#x5143;
&#x7B2C; 8 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 8 &#x5143;
&#x7B2C; 9 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 12 &#x5143;
&#x7B2C; 10 &#x53F7;&#x73A9;&#x5BB6;&#x7ECF;&#x8FC7; 10 &#x8F6E;&#x8D4C;&#x535A;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x8D44;&#x4EA7;&#x4E3A; 8 &#x5143;
=========
&#x5E84;&#x5BB6;&#x8D62;&#xFF01;&#x8D62;&#x4E86;&#xFF1A;26 &#x5143;
</code></pre><h2 id="&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x89E3;&#x6790;"><a name="&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x89E3;&#x6790;" class="anchor-navigation-ex-anchor" href="#&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x89E3;&#x6790;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x89E3;&#x6790;</h2>
<ul>
<li><strong>&#x4E8C;&#x9879;&#x968F;&#x673A;&#x6F2B;&#x6B65;</strong></li>
</ul>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x672C;&#x8282;&#x4E2D;&#x7684;&#x300C;&#x4E8C;&#x9879;&#x968F;&#x673A;&#x6F2B;&#x6B65;&#x300D;&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x4E24;&#x4E2A;&#x4EBA;&#x5728;&#x73A9;&#x5927;&#x5BCC;&#x7FC1;&#x6E38;&#x620F;&#x3002;&#x5728;&#x843D;&#x540E; z &#x6B65;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4E22;&#x9AB0;&#x5B50;&#xFF0C;&#x5982;&#x679C;&#x9AB0;&#x6570;&#x5927;&#x4E8E; x &#xFF0C;&#x5219;&#x653B;&#x51FB;&#x8005;&#x524D;&#x8FDB;&#x4E00;&#x6B65;&#xFF1B;&#x5982;&#x679C;&#x9AB0;&#x6570;&#x5C0F;&#x4E8E; x &#xFF0C;&#x5219;&#x8BDA;&#x5B9E;&#x8282;&#x70B9;&#x524D;&#x8FDB;&#x4E00;&#x6B65;&#x3002;</p>
<ul>
<li><strong>&#x6CCA;&#x677E;&#x5206;&#x5E03;</strong></li>
</ul>
<p>&#x6CCA;&#x677E;&#x5206;&#x5E03;&#x9002;&#x5408;&#x4E8E;&#x63CF;&#x8FF0;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5185;&#x968F;&#x673A;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;&#x6B21;&#x6570;&#x7684;&#x6982;&#x7387;&#x5206;&#x5E03;&#x3002;&#x5982;&#xFF1A;</p>
<p><strong>&#x67D0;&#x4E00;&#x670D;&#x52A1;&#x8BBE;&#x65BD;&#x5728;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x53D7;&#x5230;&#x7684;&#x670D;&#x52A1;&#x8BF7;&#x6C42;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x7535;&#x8BDD;&#x4EA4;&#x6362;&#x673A;&#x63A5;&#x5230;&#x547C;&#x53EB;&#x7684;&#x6B21;&#x6570;&#x3001;&#x6C7D;&#x8F66;&#x7AD9;&#x53F0;&#x7684;&#x5019;&#x5BA2;&#x4EBA;&#x6570;&#x3001;&#x673A;&#x5668;&#x51FA;&#x73B0;&#x7684;&#x6545;&#x969C;&#x6570;&#x3001;&#x81EA;&#x7136;&#x707E;&#x5BB3;&#x53D1;&#x751F;&#x7684;&#x6B21;&#x6570;&#x3001;DNA &#x5E8F;&#x5217;&#x7684;&#x53D8;&#x5F02;&#x6570;&#x3001;&#x653E;&#x5C04;&#x6027;&#x539F;&#x5B50;&#x6838;&#x7684;&#x8870;&#x53D8;&#x6570;&#x3001;&#x6FC0;&#x5149;&#x7684;&#x5149;&#x5B50;&#x6570;&#x5206;&#x5E03;&#x7B49;&#x7B49;&#x3002;</strong></p>
<p>&#x653B;&#x51FB;&#x94FE;&#x5EF6;&#x957F;&#x7684;&#x6570;&#x91CF;&#xFF08;&#x8FDB;&#x5C55;&#xFF09;&#x540C;&#x6837;&#x7B26;&#x5408;&#x6CCA;&#x677E;&#x5206;&#x5E03;&#x3002;</p>
<h2 id="&#x5EF6;&#x4F38;&#x9605;&#x8BFB;"><a name="&#x5EF6;&#x4F38;&#x9605;&#x8BFB;" class="anchor-navigation-ex-anchor" href="#&#x5EF6;&#x4F38;&#x9605;&#x8BFB;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5EF6;&#x4F38;&#x9605;&#x8BFB;</h2>
<p>&#x5982;&#x679C;&#x8BFB;&#x5230;&#x8FD9;&#x91CC;&#x8FD8;&#x662F;&#x89C9;&#x5F97;&#x4E0D;&#x61C2;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#xFF0C;&#x63CF;&#x8FF0;&#x5F97;&#x5F88;&#x8BE6;&#x7EC6;&#xFF1A;</p>
<p><a href="https://zhuanlan.zhihu.com/p/56151888" target="_blank">https://zhuanlan.zhihu.com/p/56151888</a></p>
<h2 id="&#x653B;&#x51FB;&#x8005;&#x8FFD;&#x5757;&#x6982;&#x7387;&#x8BA1;&#x7B97;-python-&#x7248;"><a name="&#x653B;&#x51FB;&#x8005;&#x8FFD;&#x5757;&#x6982;&#x7387;&#x8BA1;&#x7B97;-python-&#x7248;" class="anchor-navigation-ex-anchor" href="#&#x653B;&#x51FB;&#x8005;&#x8FFD;&#x5757;&#x6982;&#x7387;&#x8BA1;&#x7B97;-python-&#x7248;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x653B;&#x51FB;&#x8005;&#x8FFD;&#x5757;&#x6982;&#x7387;&#x8BA1;&#x7B97; Python &#x7248;</h2>
<p>&#x3010;Python &#x77E5;&#x8BC6;&#x70B9;&#x3011;</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3/library/math.html" target="_blank">math&#x5E93;&#x6587;&#x6863;</a></li>
</ul>
<pre class="language-"><code class="lang-python"><span class="token keyword">import</span> math
<span class="token keyword">def</span> <span class="token function">attacker_success_probability</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>   
    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">1.0</span>   
    p <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> q    
    lamba <span class="token operator">=</span> z <span class="token operator">*</span> <span class="token punctuation">(</span>q <span class="token operator">/</span> p<span class="token punctuation">)</span>   
    i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   
    k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   
    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>z <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>      
        poisson <span class="token operator">=</span> math<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>lamba<span class="token punctuation">)</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> 
            poisson <span class="token operator">*=</span> <span class="token punctuation">(</span>lamba <span class="token operator">/</span> i<span class="token punctuation">)</span> 
        <span class="token builtin">sum</span> <span class="token operator">-=</span> poisson <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token builtin">pow</span><span class="token punctuation">(</span>q <span class="token operator">/</span> p<span class="token punctuation">,</span> z <span class="token operator">-</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">sum</span>
</code></pre>
<pre class="language-"><code class="lang-python">q<span class="token operator">=</span> <span class="token number">0.1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;q = {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    prob <span class="token operator">=</span> attacker_success_probability<span class="token punctuation">(</span>q<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot; z = {}, P = {:.10f}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> prob<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<pre class="language-"><code>q = 0.1
 z = 0, P = 1.0000000000
 z = 1, P = 0.2045872739
 z = 2, P = 0.0509778928
 z = 3, P = 0.0131722417
 z = 4, P = 0.0034552435
 z = 5, P = 0.0009136822
 z = 6, P = 0.0002428027
 z = 7, P = 0.0000647353
 z = 8, P = 0.0000172998
 z = 9, P = 0.0000046312
</code></pre><pre class="language-"><code class="lang-python">q<span class="token operator">=</span> <span class="token number">0.3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;q = {}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    prob <span class="token operator">=</span> attacker_success_probability<span class="token punctuation">(</span>q<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot; z = {}, P = {:.10f}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>z<span class="token punctuation">,</span> prob<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<pre class="language-"><code>q = 0.3
 z = 0, P = 1.0000000000
 z = 5, P = 0.1773523114
 z = 10, P = 0.0416604800
 z = 15, P = 0.0101007622
 z = 20, P = 0.0024803982
 z = 25, P = 0.0006132284
 z = 30, P = 0.0001522339
 z = 35, P = 0.0000378958
 z = 40, P = 0.0000094517
 z = 45, P = 0.0000023608
</code></pre><footer class="page-footer"><span class="copyright">&#x674E;&#x5927;&#x72D7; Leeduckgo &#xA9; 2019  all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">Last Modified: 
2019-09-15
</span></footer> <link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css"> <script>     window.klipse_settings = {         selector: ".language-klipse, .lang-eval-clojure",         selector_eval_js: ".lang-eval-js",         selector_eval_python_client: ".lang-eval-python",         selector_eval_php: ".lang-eval-php",         selector_eval_scheme: ".lang-eval-scheme",         selector_eval_ruby: ".lang-eval-ruby",         selector_reagent: ".lang-reagent",        selector_google_charts: ".lang-google-chart",        selector_es2017: ".lang-eval-es2017",        selector_jsx: ".lang-eval-jsx",        selector_transpile_jsx: ".lang-transpile-jsx",        selector_render_jsx: ".lang-render-jsx",        selector_react: ".lang-react",        selector_eval_markdown: ".lang-render-markdown",        selector_eval_lambdaway: ".lang-render-lambdaway",        selector_eval_cpp: ".lang-eval-cpp",        selector_eval_html: ".lang-render-html",        selector_sql: ".lang-eval-sql",        selector_brainfuck: "lang-eval-brainfuck",        selector_js: ".lang-transpile-cljs"    }; </script> <script src="https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js"></script>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="10_Privacy_隐私.html" class="navigation navigation-prev " aria-label="Previous page: 10 Privacy 隐私">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="12_Conclusion_结论.html" class="navigation navigation-next " aria-label="Next page: 12 Conclusion 结论">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"11 Calculations 计算","level":"1.13","depth":1,"next":{"title":"12 Conclusion 结论","level":"1.14","depth":1,"path":"12_Conclusion_结论.md","ref":"12_Conclusion_结论.md","articles":[]},"previous":{"title":"10 Privacy 隐私","level":"1.12","depth":1,"path":"10_Privacy_隐私.md","ref":"10_Privacy_隐私.md","articles":[]},"dir":"ltr"},"config":{"plugins":["search-plus@^0.0.11","-highlight","-livereload","simple-page-toc@^0.1.1","github@^2.0.0","prism@^2.1.0","prism-themes@^0.0.2","advanced-emoji@^0.2.1","anchors@^0.7.1","include-codeblock@^3.0.2","ace@^0.3.2","emphasize@^1.1.0","splitter@^0.0.8","mermaid-gb3@2.1.0","tbfed-pagefooter@^0.0.1","sectionx@^3.1.0","local-video@^1.0.1","sitemap-general@^0.1.1","anchor-navigation-ex@0.1.8","favicon@^0.0.2","todo@^0.1.3","3-ba@^0.9.0","terminal@^0.3.2","alerts@^0.2.0","include-csv@^0.1.0","puml@^1.0.1","klipse@^1.2.0","rss@^3.0.2","-sharing","sharing-plus@^0.0.2","graph@^0.1.0","chart@^0.2.0","ga","copy-code-button","livereload"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"李大狗 Leeduckgo © 2019 ","modify_label":"Last Modified: ","modify_format":"YYYY-MM-DD"},"prism":{"css":["prism-themes/themes/prism-base16-ateliersulphurpool.light.css"]},"include-csv":{},"emphasize":{},"ace":{},"github":{"url":"https://github.com/leeduckgo/bitcoin_elementary_course_based_on_jupyterlab.git"},"puml":{},"simple-page-toc":{"maxDepth":3,"skipFirstH1":true},"todo":{},"splitter":{},"search":{"maxIndexSize":1000000},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"graph":{},"sitemap-general":{"prefix":"https://bitcoin.doge.university/book"},"fontsettings":{"theme":"white","family":"sans","size":2},"rss":{"categories":["gitbook"],"title":"基于 JupyterLab 的比特币及速入门指南","description":"进入区块链世界的绝佳入口","author":"李大狗","feed_url":"https://bitcoin.doge.university/book/sitmap.xml","site_url":"https://bitcoin.doge.university/book","managingEditor":"leeduckg@gmail.com","webMaster":"leeduckg@gmail.com"},"sectionx":{"tag":"b"},"mermaid-gb3":{},"anchor-navigation-ex":{"isRewritePageTitle":false,"isShowTocTitleIcon":true,"tocLevel1Icon":"fa fa-hand-o-right","tocLevel2Icon":"fa fa-hand-o-right","tocLevel3Icon":"fa fa-hand-o-right"},"favicon":{"shortcut":"favicon.png","bookmark":"favicon.png"},"prism-themes":{},"alerts":{},"3-ba":{"configuration":"auto","token":"e0f7e2879e5634cc0f587da6721b6860"},"mathjax":{"forceSVG":true},"local-video":{},"copy-code-button":{},"ga":{"configuration":"auto","token":"UA-123686345-1"},"klipse":{"myConfigKey":"it's the default value"},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"check":false,"edit":true,"fixlang":false,"lang":"","template":"ace","theme":"chrome","unindent":true},"sharing":{"qq":false,"all":["facebook","google","twitter","weibo","instapaper","linkedin","pocket","stumbleupon","qq","qzone"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"terminal":{"copyButtons":true,"fade":false,"style":"flat"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"chart":{"type":"c3"},"search-plus":{}},"theme":"default","author":"李大狗","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"基于 JupyterLab 的比特币极速入门指南","language":"zh-hans","output.name":"site","links":{"sidebar":{"Home":"https://bitcoin.doge.university"}},"gitbook":"3.2.3","description":"进入区块链世界的绝佳入口"},"file":{"path":"11_Calculations_计算.md","mtime":"2019-09-15T03:57:42.472Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-15T03:59:37.683Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ace/ace/ace.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ace/ace.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sectionx/sectionx.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-local-video/video.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-3-ba/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-terminal/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-alerts/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-rss/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/buttons.js"></script>
        
    

    <script src="gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

